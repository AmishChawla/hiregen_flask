{% if current_user.role == 'jobseeker' %}
{% extends 'jobseeker/jobseeker_base.html' %}
{% elif current_user.role == 'admin' %}
{% extends 'admin_base.html' %}
{% elif current_user.role == 'user' %}
{% extends 'base.html' %}
{% else %}
{% extends 'common_base.html' %}
{% endif %}


{% block content %}
<div class="">
    <div class="min-h-screen py-6">
      <div class="container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        
    <!--Left Sidebar -->
        <div class="rounded-2xl border border-gray-200 bg-gray-100 p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-5 mb-5">
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-3">Quick job search</h2>
            <form method="GET" action="{{ url_for('jobs_search') }}">
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-3 mb-4">
                <div>
                    <!-- <label class="block text-gray-700 font-medium" for="keyword">Search</label> -->
                    <input type="text" id="keyword" name="keyword" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600" placeholder="Enter keyword (e.g., job title, company)" value="{{ prefilled_data.keyword if prefilled_data.keyword is not none else '' }}">
                </div>
                <div>
                    <!-- <label class="mt-4 block text-gray-700 font-medium" for="country">Country</label> -->
                    <select id="country" name="country" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600">
                        <option value="">Select Country</option>
                        {% for country in countries %}
                            <option value="{{ country }}" {% if country == prefilled_data.country %}selected{% endif %}>{{ country }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <!-- <label class="mt-4 block text-gray-700 font-medium" for="state">State</label> -->
                    <input type="text" id="state" name="state" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600" placeholder="Enter State" value="{{ prefilled_data.state if prefilled_data.state is not none else '' }}">
                </div>
            </div>
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-4">
                <div>
                    <!-- <label class="mt-4 block text-gray-700 font-medium" for="job_type">Job Type</label> -->
                    <select id="job_type" name="job_type" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600">
                        <option value="">Select Job Type</option>
                        {% for value, label in job_types %}
                            <option value="{{ value }}" {% if value == prefilled_data.job_type %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <!-- <label class="mt-4 block text-gray-700 font-medium" for="industry">Industry</label> -->
                    <select id="industry" name="industry" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600">
                        <option value="">Select Industry</option>
                        {% for value, label in industries %}
                            <option value="{{ value }}" {% if value == prefilled_data.industry %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <!-- <label class="mt-4 block text-gray-700 font-medium" for="posted_on">Posted On</label> -->
                    <select id="posted_on" name="date_filter" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-2 focus:outline-indigo-600">
                        <option value="">Select Date Range</option>
                        <option value="last_24_hours" {% if prefilled_data.date_filter =='last_24_hours' %}selected{% endif %}>Last 24 hours</option>
                        <option value="last_week" {% if prefilled_data.date_filter =='last_week' %}selected{% endif %}>Last Week</option>
                        <option value="last_month" {% if prefilled_data.date_filter =='last_month' %}selected{% endif %}>Last Month</option>
                    </select>
                </div>
            
            <div>
                <button type="submit" class="w-full rounded-md bg-blue-600 px-3.5 py-2 text-sm font-semibold text-white shadow-xs hover:bg-blue-500 focus-visible:outline-1 focus-visible:outline-offset-2 focus-visible:outline-blue-600">Search Jobs</button>
            </div>
        </div>
            </div>
        </form>
    <div>
    <div class="container max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <h1 class="text-base text-gray-600 dark:text-white mb-4">1053 jobs found</h1>
        {% for job in jobs %}
<a href="{{ url_for('get_post_by_company_subdomain_and_slug', company_subdomain=job.company_subdomain, job_date=job.created_at.split('T')[0], job_slug=job.job_slug) }}"
   class="block rounded-2xl border mb-3 border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-4 hover:shadow-lg transition">

    <div class="flex justify-between items-center">
        <!-- Left Side: Logo + Job Title + Salary/Type/Industry -->
        <div class="flex items-start space-x-4">
            <img src="{{ job.company_logo }}" alt="{{ job.company_name }} Logo" class="w-14 h-14 rounded-full object-contain bg-gray-50 border">
            <div>
                <h2 class="text-xl font-semibold text-gray-800">{{ job.job_title }}</h2>
                <div class="mt-2 text-gray-600 text-sm">
                    <span class="me-6 text-sm text-gray-500 dark:text-gray-400">{{ job.salary }}</span>
                    <span class="me-6 text-sm text-gray-500 dark:text-gray-400">{{ job.job_type }}</span>
                    <span class="text-sm text-gray-500 dark:text-gray-400">{{ job.industry }}</span>
                </div>
            </div>
        </div>

        <!-- Right Side: Location & Date -->
        <div class="text-right text-gray-600 text-sm">
            <span class="me-6">{{ job.address_city }}, {{ job.address_province }}, {{ job.address_country }}</span>
            <span class="text-gray-500">{{ job.opening_date.split('T')[0] }}</span>
        </div>
    </div>
</a>
    {% endfor %}
    </div>
    </div>
    <!--Right Sidebar -->
</div>
</div>
</div>
</div>
{% endblock %}
