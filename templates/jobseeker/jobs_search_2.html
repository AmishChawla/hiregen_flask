{% if current_user.role == 'jobseeker' %}
{% extends 'jobseeker/jobseeker_base.html' %}
{% elif current_user.role == 'admin' %}
{% extends 'admin_base.html' %}
{% elif current_user.role == 'user' %}
{% extends 'base.html' %}
{% else %}
{% extends 'common_base.html' %}
{% endif %}


{% block content %}

<div class="flex gap-12">
    <!--Left Sidebar -->
    <div class="w-[25%]">
        <div class="bg-white shadow-lg rounded-lg border w-full">
        <div class="container p-6">
            <form method="GET" action="{{ url_for('jobs_search') }}">
                <div class="gap-4">
                    <div>
                        <label class="block text-gray-700 font-medium" for="keyword">Search</label>
                        <input type="text" id="keyword" name="keyword" class="mt-2 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-blue-700" placeholder="Enter keyword (e.g., job title, company)" value="{{ prefilled_data.keyword }}">
                    </div>
                    <div>
                        <label class="mt-4 block text-gray-700 font-medium" for="country">Country</label>
                        <select id="country" name="country" class="mt-2 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-blue-700">
                            <option value="">Select Country</option>
                            {% for country in countries %}
                                <option value="{{ country }}" {% if country == prefilled_data.country %}selected{% endif %}>{{ country }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="mt-4 block text-gray-700 font-medium" for="state">State</label>
                        <input type="text" id="state" name="state" class="mt-2 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-blue-700" placeholder="Enter State" value="{{ prefilled_data.state }}">
                    </div>
                    <div>
                        <label class="mt-4 block text-gray-700 font-medium" for="job_type">Job Type</label>
                        <select id="job_type" name="job_type" class="mt-2 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-blue-700">
                            <option value="">Select Job Type</option>
                            {% for value, label in job_types %}
                                <option value="{{ value }}" {% if value == prefilled_data.job_type %}selected{% endif %}>{{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="mt-4 block text-gray-700 font-medium" for="industry">Industry</label>
                        <select id="industry" name="industry" class="mt-2 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-blue-700">
                            <option value="">Select Industry</option>
                            {% for value, label in industries %}
                                <option value="{{ value }}" {% if value == prefilled_data.industry %}selected{% endif %}>{{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="mt-4 block text-gray-700 font-medium" for="posted_on">Posted On</label>
                        <select id="posted_on" name="date_filter" class="mt-2 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-blue-700">
                            <option value="">Select Date Range</option>
                            <option value="last_24_hours" {% if prefilled_data.date_filter =='last_24_hours' %}selected{% endif %}>Last 24 hours</option>
                            <option value="last_week" {% if prefilled_data.date_filter =='last_week' %}selected{% endif %}>Last Week</option>
                            <option value="last_month" {% if prefilled_data.date_filter =='last_month' %}selected{% endif %}>Last Month</option>
                        </select>
                    </div>
                </div>
                <div class="mt-4">
                    <button type="submit" class="w-full bg-blue-700 text-white py-2 px-4 rounded-md font-semibold hover:bg-blue-600">Search Jobs</button>
                </div>
            </form>
        </div>
    </div>
    </div>
    <!--Left Sidebar -->

    <!--Right Sidebar -->
    <div class="w-[75%]">
            <div class="container">
        {% for job in jobs %}
<a href="{{ url_for('get_post_by_company_subdomain_and_slug', company_subdomain=job.company_subdomain, job_date=job.created_at.split('T')[0], job_slug=job.id) }}"
   class="block mb-3 bg-white shadow rounded-lg border p-4 hover:shadow-lg transition">

    <div class="flex justify-between items-center">
        <!-- Left Side: Logo + Job Title + Salary/Type/Industry -->
        <div class="flex items-start space-x-4">
            <img src="{{ job.company_logo }}" alt="{{ job.company_name }} Logo" class="w-14 h-14 rounded-full object-contain bg-gray-50 border">
            <div>
                <h2 class="text-xl font-semibold text-gray-800">{{ job.job_title }}</h2>
                <div class="mt-2 text-gray-600 text-sm">
                    <span class="me-6 text-sm text-gray-500 dark:text-gray-400">{{ job.salary }}</span>
                    <span class="me-6 text-sm text-gray-500 dark:text-gray-400">{{ job.job_type }}</span>
                    <span class="text-sm text-gray-500 dark:text-gray-400">{{ job.industry }}</span>
                </div>
            </div>
        </div>

        <!-- Right Side: Location & Date -->
        <div class="text-right text-gray-600 text-sm">
            <span class="me-6">{{ job.address_city }}, {{ job.address_province }}, {{ job.address_country }}</span>
            <span class="text-gray-500">{{ job.opening_date.split('T')[0] }}</span>
        </div>
    </div>

</a>

        {% endfor %}
    </div>
    </div>
    <!--Right Sidebar -->
</div>
{% endblock %}
