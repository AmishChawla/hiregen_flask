{% if current_user.role == 'jobseeker' %}
{% extends 'jobseeker/jobseeker_base.html' %}
{% elif current_user.role == 'admin' %}
{% extends 'admin_base.html' %}
{% elif current_user.role == 'user' %}
{% extends 'base.html' %}
{% else %}
{% extends 'common_base.html' %}
{% endif %}


{% block content %}
    <div class="bg-white shadow-md p-6 w-full">
        <div class="container mx-auto">
            <form method="GET" action="{{ url_for('jobs_search') }}">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4">
                    <div>
                        <label class="block text-gray-700 font-medium" for="keyword">Search</label>
                        <input type="text" id="keyword" name="keyword" class="w-full border rounded-md p-2" placeholder="Enter keyword (e.g., job title, company)" value="{{ prefilled_data.keyword }}">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium" for="country">Country</label>
                        <select id="country" name="country" class="w-full border rounded-md p-2">
                            <option value="">Select Country</option>
                            {% for country in countries %}
                                <option value="{{ country }}" {% if country == prefilled_data.country %}selected{% endif %}>{{ country }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium" for="state">State</label>
                        <input type="text" id="state" name="state" class="w-full border rounded-md p-2" placeholder="Enter State" value="{{ prefilled_data.state }}">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium" for="job_type">Job Type</label>
                        <select id="job_type" name="job_type" class="w-full border rounded-md p-2">
                            <option value="">Select Job Type</option>
                            {% for value, label in job_types %}
                                <option value="{{ value }}" {% if value == prefilled_data.job_type %}selected{% endif %}>{{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium" for="industry">Industry</label>
                        <select id="industry" name="industry" class="w-full border rounded-md p-2">
                            <option value="">Select Industry</option>
                            {% for value, label in industries %}
                                <option value="{{ value }}" {% if value == prefilled_data.industry %}selected{% endif %}>{{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium" for="posted_on">Posted On</label>
                        <select id="posted_on" name="date_filter" class="w-full border rounded-md p-2">
                            <option value="">Select Date Range</option>
                            <option value="last_24_hours" {% if prefilled_data.date_filter =='last_24_hours' %}selected{% endif %}>Last 24 hours</option>
                            <option value="last_week" {% if prefilled_data.date_filter =='last_week' %}selected{% endif %}>Last Week</option>
                            <option value="last_month" {% if prefilled_data.date_filter =='last_month' %}selected{% endif %}>Last Month</option>
                        </select>
                    </div>
                </div>
                <div class="mt-4">
                    <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md font-semibold hover:bg-blue-700">Search Jobs</button>
                </div>
            </form>
        </div>
    </div>
    <div class="container mx-auto mt-6">
        {% for job in jobs %}
        <a href="{{ url_for('get_post_by_company_subdomain_and_slug', company_subdomain=job.company_subdomain, job_date=job.JobOpening.created_at.split('T')[0], job_slug=job.JobOpening.slug) }}" class="block mb-4 bg-white shadow-md rounded-md p-4 hover:shadow-lg transition">
            <div class="flex items-center">
                <img src="{{ job.company_logo }}" alt="{{ job.company_name }} Logo" class="w-16 h-16 rounded-md object-cover mr-4">
                <div>
                    <h2 class="text-xl font-semibold text-gray-800">{{ job.JobOpening.job_title }}</h2>
                    <p class="text-gray-600 text-sm">{{ job.JobOpening.address_city }}, {{ job.JobOpening.address_province }}, {{ job.JobOpening.address_country }}</p>
                    <p class="text-gray-500 text-sm">{{ job.JobOpening.opening_date.split('T')[0] }}</p>
                    <div class="flex space-x-4 text-gray-600 text-sm mt-2">
                        <p><strong>Salary:</strong> {{ job.JobOpening.salary }}</p>
                        <p><strong>Experience:</strong> {{ job.JobOpening.work_experience }}</p>
                        <p><strong>Type:</strong> {{ job.JobOpening.job_type }}</p>
                        <p><strong>Industry:</strong> {{ job.JobOpening.industry }}</p>
                    </div>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
{% endblock %}
