{% if current_user %}
    {% if current_user.role == 'user' %}
        {% extends 'base.html' %}
    {% elif current_user.role == 'jobseeker' %}
        {% extends 'jobseeker/jobseeker_base.html' %}
    {% elif current_user.role == 'admin' %}
        {% extends 'admin_base.html' %}
    {% endif %}
{% elif current_user.is_authenticated is None %}
    {% extends 'common_base.html' %}
{% endif %}

{% block content %}

<!-- Tailwind CSS Integration -->
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.5/dist/cdn.min.js" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    };
  </script>


<!-- Main Container -->
 <div>
 <div class="min-h-screen py-6">
<div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Company Card -->
    <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6">
        <!-- Company Details -->
        <div class="rounded-2xl text-center border border-gray-200 bg-gray-100 p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6">
            <!-- Company Logo -->
            {% if company.company_logo %}
                <img src="{{ company.company_logo }}" alt="{{ company.name }} Logo" class="w-32 h-32 mx-auto rounded-full border-2 border-gray-300 dark:border-gray-600 mb-3">
            {% else %}
                <img src="https://via.placeholder.com/150" alt="Default Logo" class="w-32 h-32 mx-auto rounded-full border-2 border-gray-300 dark:border-gray-600 mb-3">
            {% endif %}

            <!-- Company Name -->
            <h2 class="text-2xl font-semibold text-gray-900 dark:text-white dark:text-gray-100 mb-3">{{ company.name }}</h2>

            <!-- Location -->
            <p class="text-gray-600 dark:text-gray-400 flex items-center justify-center space-x-2">
                <i class="bi bi-geo-alt-fill text-red-500">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
  <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
</svg>

                </i>
                <span>{{ company.location }}</span>
            </p>

        </div>

            <!-- Company Description -->
        <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6 my-5">
            <h3 class="mt-2 text-2xl font-semibold text-gray-800 dark:text-gray-100">About company</h3>
            <div x-data="{ expanded: false }" class="text-gray-700 dark:text-gray-300">
                <p x-bind:class="{ 'line-clamp-3': !expanded }" class="line-clamp-3">{{ company.description }}</p>
                <button @click="expanded = !expanded" class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 font-medium">
                    <span x-text="expanded ? 'Show less' : 'Read more...'">Read more...</span>
                </button>
            </div>
        </div>

        <!-- Job Posts -->
        <div class="space-y-4">
            <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100">Job Openings</h3>
            {% if job_posts and job_posts|length > 0 %}
            <div class="border-t border-gray-100 p-4 dark:border-gray-800 sm:p-6">
                <div class="grid grid-cols-1 gap-5 sm:grid-cols-2 xl:grid-cols-3">
                <!-- Card Item -->
                {% for data in job_posts %}
                <!-- {% if data.job_opening_status == 'Active' and data.status == 'published' %} -->
            
                <div>
                <div class="rounded-xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] sm:p-6">
                <div>
                <div class="mb-5 flex h-14 max-w-14 items-center justify-center rounded-[10.5px] bg-brand-50 text-brand-500 dark:bg-brand-500/10">
                <svg class="fill-current" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M13.6147 4.39464C13.8572 4.2734 14.1426 4.2734 14.385 4.39464L21.8797 8.14188L14.3973 11.883C14.1471 12.0081 13.8526 12.0081 13.6024 11.883L6.11997 8.14188L13.6147 4.39464ZM5.02148 9.57978V18.7772C5.02148 19.1035 5.20581 19.4017 5.49762 19.5476L13.1109 23.3542V13.6016C13.0079 13.5652 12.9066 13.5222 12.8076 13.4727L5.02148 9.57978ZM14.8883 23.3544L22.5021 19.5476C22.7939 19.4017 22.9782 19.1035 22.9782 18.7772V9.57978L15.1921 13.4727C15.0929 13.5223 14.9915 13.5653 14.8883 13.6018L14.8883 23.3544ZM14.7825 3.59978L15.1799 2.80493C14.437 2.43351 13.5627 2.43351 12.8198 2.80493L4.70279 6.86333C3.80884 7.3103 3.24414 8.22398 3.24414 9.22344V18.7772C3.24414 19.7767 3.80883 20.6904 4.70279 21.1373L12.8198 25.1958L13.2172 24.4009L12.8198 25.1958C13.5627 25.5672 14.437 25.5672 15.1799 25.1958L23.2969 21.1373C24.1909 20.6904 24.7556 19.7767 24.7556 18.7772V9.22344C24.7556 8.22398 24.1909 7.3103 23.2969 6.86333L15.1799 2.80493L14.7825 3.59978Z" fill=""></path>
                </svg>
                </div>
                
                <h4 class="mb-1 text-theme-xl font-medium text-gray-800 dark:text-white/90">
                    <a href="{{ url_for('get_post_by_company_subdomain_and_slug', company_subdomain=company.company_subdomain, job_date=data.created_at.split('T')[0], job_slug=data.slug) }}" class="text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800">
                        {{ data.job_title }}
                    </a>
                </h4>
                
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Animi architecto aspernatur cum et ipsum
                </p>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                    {{ data.created_at.split('T')[0] }}
                </p>
                </div>
                </div>
                </div>
                <!-- {% endif %} -->
                {% endfor %}

                </div>
            </div>
            {% else %}
            <p class="text-center text-gray-500 dark:text-gray-400">No Job Openings right now.</p>
        {% endif %}

        </div>

        <!-- Social Links -->
        <div class="flex justify-center space-x-4 mt-6">
            {% if company.linkedin_url %}
                <a href="{{ company.linkedin_url }}" class="text-blue-700 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-500">
                    <i class="bi bi-linkedin text-2xl"></i>
                </a>
            {% endif %}
            {% if company.google_map_url %}
                <a href="{{ company.google_map_url }}" class="text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-500">
                    <i class="bi bi-geo-alt-fill text-2xl"></i>
                </a>
            {% endif %}
            {% if company.twitter_url %}
                <a href="{{ company.twitter_url }}" class="text-black hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300">
                    <i class="bi bi-twitter text-2xl"></i>
                </a>
            {% endif %}
            {% if company.instagram_url %}
                <a href="{{ company.instagram_url }}" class="text-pink-500 hover:text-pink-600 dark:text-pink-400 dark:hover:text-pink-500">
                    <i class="bi bi-instagram text-2xl"></i>
                </a>
            {% endif %}
        </div>
    </div>
</div>
</div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Format Date
        document.querySelectorAll('[data-date]').forEach(el => {
            const originalDate = el.getAttribute('data-date');
            const dateObj = new Date(originalDate);
            if (!isNaN(dateObj)) {
                el.textContent = dateObj.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }
        });
    });
</script>

{% endblock %}
