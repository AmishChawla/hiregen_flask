{% extends 'base.html' %}

{% block styles %}
    <style>
        .select2-dropdown {
            z-index: 9999 !important;
        }
    </style>
{% endblock %}

{% block title %} Applicant Search {% endblock %}

{% block content %}
<div class="py-6 px-4 sm:px-6 lg:px-8">
  <div class="min-h-screen py-0">
    <div class="container max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="mb-6">
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Applicant search</h1>
      </div>
<div class="rounded-lg border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] md:p-6  shadow-sm animate-fade-in">
  <form id="filter-form" action="{{ url_for('employer_applicants_filter') }}" method="post" class="space-y-6">
        <!-- Job Title -->
        <div>
          <label for="job_title" class="block text-sm font-medium text-gray-900 dark:text-gray-200">Job Title</label>
          <input type="text" id="job_title" name="job_title" placeholder="Enter Job Title" class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-1 focus:outline-blue-600">
        </div>

            <!-- Name -->
    <div>
      <label for="name" class="block text-sm font-medium text-gray-900 dark:text-gray-200">Applicant Name</label>
      <input type="text" id="name" name="name" placeholder="Enter Applicant's Name" class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-1 focus:outline-blue-600">
    </div>

    <!-- Email -->
    <div>
      <label for="email" class="block text-sm font-medium text-gray-900 dark:text-gray-200">Applicant Email</label>
      <input type="email" id="email" name="email" placeholder="Enter Applicant's Email" class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-1 focus:outline-blue-600">
    </div>
        <!-- Job Type -->
        <div class="flex space-x-6">
          <div class="w-1/2">
            <div>
              <label for="job_type" class="block text-sm font-medium text-gray-900 dark:text-gray-200">Job Type</label>
              <select id="job_type" name="job_type" class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-1 focus:outline-blue-600">
                <option></option>
                {% for value, label in job_types %}
                <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          <div class="w-1/2">
                <!-- Industry Dropdown with Search -->
        <div>
          <label for="industry" class="block text-sm font-medium text-gray-900 dark:text-gray-200">Industry</label>
          <select id="industry" name="industry" class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-1 focus:outline-blue-600">
            <option></option>
            {% for value, label in industries %}
            <option value="{{ value }}">{{ label }}</option>
            {% endfor %}
          </select>
        </div>
          </div>
        </div>
    <!-- Application Date Range -->
    <div class="flex space-x-6">
      <div class="w-1/2">
        <div>
          <label for="application_start_date" class="block text-sm font-medium text-gray-900 dark:text-gray-200">Start Date</label>
          <input type="date" id="application_start_date" name="application_start_date" class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-1 focus:outline-blue-600">
        </div>
      </div>
      <div class="w-1/2">
        <div>
          <label for="application_end_date" class="block text-sm font-medium text-gray-900 dark:text-gray-200">End Date</label>
          <input type="date" id="application_end_date" name="application_end_date" class="mt-2 block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 outline-gray-300 placeholder-gray-400 focus:outline-1 focus:-outline-offset-1 focus:outline-blue-600">
        </div>
      </div>
    </div>

    <!-- Availability Checkbox -->
    <div class="flex items-center">
      <input type="checkbox" id="available" name="available" value="1" class="h-4 w-4 rounded border-gray-300 text-purple-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-blue-400">
      <label for="available" class="ml-2 block text-sm text-gray-900 dark:text-gray-200">Only Available Applicants</label>
    </div>

    <!-- Search Button -->
    <button type="submit" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 text-primary-foreground h-10 py-2 bg-blue-600 hover:bg-blue-700 px-4 text-white">Search</button>
  </form>
</div>
</div>
  </div>
  </div>
<script>
  // No Select2 required as Tailwind's dropdown and select styles are native
  
  // Set default dates when page loads
  document.addEventListener('DOMContentLoaded', function() {
    // Get today's date
    const today = new Date();
    const todayString = today.toISOString().split('T')[0];
    
    // Get date 1 month ago
    const oneMonthAgo = new Date();
    oneMonthAgo.setMonth(oneMonthAgo.getMonth() - 1);
    const oneMonthAgoString = oneMonthAgo.toISOString().split('T')[0];
    
    // Set default values
    document.getElementById('application_start_date').value = oneMonthAgoString;
    document.getElementById('application_end_date').value = todayString;
  });
</script>
{% endblock %}
